"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7012],{37012:(t,e,r)=>{r.d(e,{default:()=>v});var a=r(95155),o=r(48173),i=r.n(o),s=r(20591),n=r(5870),c=r(70865),l=r(14085);r(12115);var d=r(31027),u=r(29602);let f=(0,d.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function m(t){let{className:e,variant:r,...o}=t;return(0,a.jsx)("div",{className:(0,u.cn)(f({variant:r}),e),...o})}var p=r(92726),h=r(72198);function v(t){let{product:e}=t,{addToCart:r}=(0,p._)();return(0,a.jsxs)("div",{className:"group relative",children:[(0,a.jsxs)("div",{className:"aspect-square bg-muted rounded-lg overflow-hidden",children:[(0,a.jsx)(i(),{href:"/products/".concat(e.id),children:(0,a.jsx)("img",{src:e.image||({skincare:"https://images.unsplash.com/photo-1570172619644-dfd03ed5d881?q=80&w=500&auto=format&fit=crop",makeup:"https://images.unsplash.com/photo-1596462502278-27bfdc403348?q=80&w=500&auto=format&fit=crop",haircare:"https://images.unsplash.com/photo-1535585209827-a15fcdbc4c2d?q=80&w=500&auto=format&fit=crop",fragrance:"https://images.unsplash.com/photo-1594035910387-fea47794261f?q=80&w=500&auto=format&fit=crop","bath-body":"https://images.unsplash.com/photo-1608248597279-f99d160bfcbc?q=80&w=500&auto=format&fit=crop",tools:"https://images.unsplash.com/photo-1522338242992-e1a54906a8da?q=80&w=500&auto=format&fit=crop"})[e.category]||"https://images.unsplash.com/photo-1571781926291-c477ebfd024b?q=80&w=500&auto=format&fit=crop",alt:e.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"})}),(0,a.jsx)("div",{className:"absolute top-2 right-2 flex flex-col gap-2",children:(0,a.jsx)(l.$,{variant:"secondary",size:"icon",className:"h-8 w-8 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:(0,a.jsx)(s.A,{className:"h-4 w-4"})})}),e.originalPrice&&(0,a.jsxs)(m,{className:"absolute top-2 left-2 bg-pink-600",children:[Math.round((1-e.price/e.originalPrice)*100),"% OFF"]}),(0,a.jsx)("div",{className:"absolute bottom-0 left-0 right-0 p-4 bg-gradient-to-t from-black/70 to-transparent opacity-0 group-hover:opacity-100 transition-opacity",children:(0,a.jsxs)(l.$,{className:"w-full bg-white text-black hover:bg-gray-100",onClick:()=>r(e),children:[(0,a.jsx)(n.A,{className:"mr-2 h-4 w-4"})," Add to Cart"]})})]}),(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsxs)("div",{className:"flex items-center mb-1",children:[(0,a.jsx)("div",{className:"flex",children:[,,,,,].fill(0).map((t,r)=>(0,a.jsx)(c.A,{className:"h-4 w-4 ".concat(r<e.rating?"fill-yellow-400 text-yellow-400":"text-muted")},r))}),(0,a.jsxs)("span",{className:"ml-1 text-xs text-muted-foreground",children:["(",e.reviews,")"]})]}),(0,a.jsx)(i(),{href:"/products/".concat(e.id),children:(0,a.jsx)("h3",{className:"font-medium text-sm md:text-base hover:text-pink-600 transition-colors",children:e.name})}),(0,a.jsxs)("div",{className:"mt-1 flex items-center",children:[(0,a.jsx)("span",{className:"font-medium text-pink-600",children:(0,h.v)(e.price)}),e.originalPrice&&(0,a.jsx)("span",{className:"ml-2 text-sm text-muted-foreground line-through",children:(0,h.v)(e.originalPrice)})]})]})]})}},14085:(t,e,r)=>{r.d(e,{$:()=>l,r:()=>c});var a=r(95155),o=r(12115),i=r(12317),s=r(31027),n=r(29602);let c=(0,s.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),l=o.forwardRef((t,e)=>{let{className:r,variant:o,size:s,asChild:l=!1,...d}=t,u=l?i.DX:"button";return(0,a.jsx)(u,{className:(0,n.cn)(c({variant:o,size:s,className:r})),ref:e,...d})});l.displayName="Button"},92726:(t,e,r)=>{r.d(e,{_:()=>i});var a=r(12115),o=r(8192);function i(){let t=(0,a.useContext)(o.M);if(!t)throw Error("useCart must be used within a CartProvider");return t}},20241:(t,e,r)=>{r.d(e,{oR:()=>d}),r(12115);let a=0,o=new Map,i=t=>{if(o.has(t))return;let e=setTimeout(()=>{o.delete(t),l({type:"REMOVE_TOAST",toastId:t})},1e6);o.set(t,e)},s=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,1)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(t=>t.id===e.toast.id?{...t,...e.toast}:t)};case"DISMISS_TOAST":{let{toastId:r}=e;return r?i(r):t.toasts.forEach(t=>{i(t.id)}),{...t,toasts:t.toasts.map(t=>t.id===r||void 0===r?{...t,open:!1}:t)}}case"REMOVE_TOAST":if(void 0===e.toastId)return{...t,toasts:[]};return{...t,toasts:t.toasts.filter(t=>t.id!==e.toastId)}}},n=[],c={toasts:[]};function l(t){c=s(c,t),n.forEach(t=>{t(c)})}function d(t){let{...e}=t,r=(a=(a+1)%Number.MAX_SAFE_INTEGER).toString(),o=()=>l({type:"DISMISS_TOAST",toastId:r});return l({type:"ADD_TOAST",toast:{...e,id:r,open:!0,onOpenChange:t=>{t||o()}}}),{id:r,dismiss:o,update:t=>l({type:"UPDATE_TOAST",toast:{...t,id:r}})}}},72198:(t,e,r)=>{r.d(e,{v:()=>a});function a(t){return new Intl.NumberFormat("en-KE",{style:"currency",currency:"KES",minimumFractionDigits:0,maximumFractionDigits:0}).format(t)}},29602:(t,e,r)=>{r.d(e,{cn:()=>i});var a=r(43463),o=r(69795);function i(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];return(0,o.QP)((0,a.$)(e))}},8192:(t,e,r)=>{r.d(e,{CartProvider:()=>n,M:()=>s});var a=r(95155),o=r(12115),i=r(20241);let s=(0,o.createContext)(void 0);function n(t){let{children:e}=t,[r,n]=(0,o.useState)([]),[c,l]=(0,o.useState)(0),[d,u]=(0,o.useState)(!0);(0,o.useEffect)(()=>{!async function(){try{let t=await fetch("/api/cart");if(t.ok){let e=await t.json();n(e.items||[]),l(e.subtotal||0)}}catch(t){console.error("Failed to fetch cart:",t)}finally{u(!1)}}()},[]);let f=async function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2?arguments[2]:void 0;try{u(!0);let a=await fetch("/api/cart",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({productId:t,quantity:e,variant:r})});if(!a.ok){let t=await a.json();throw Error(t.error||"Failed to add item to cart")}let o=await fetch("/api/cart"),s=await o.json();n(s.items||[]),l(s.subtotal||0),(0,i.oR)({title:"Item added to cart",description:"".concat(e," item(s) have been added to your cart.")})}catch(t){console.error("Failed to add to cart:",t),(0,i.oR)({title:"Error",description:t instanceof Error?t.message:"Failed to add item to cart",variant:"destructive"})}finally{u(!1)}},m=async(t,e)=>{try{u(!0);let r=await fetch("/api/cart/".concat(t),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({quantity:e})});if(!r.ok){let t=await r.json();throw Error(t.error||"Failed to update cart")}(await r.json()).deleted&&n(e=>e.filter(e=>e.id!==t));let a=await fetch("/api/cart"),o=await a.json();n(o.items||[]),l(o.subtotal||0)}catch(t){console.error("Failed to update cart:",t),(0,i.oR)({title:"Error",description:t instanceof Error?t.message:"Failed to update cart",variant:"destructive"})}finally{u(!1)}},p=async t=>{try{u(!0);let e=await fetch("/api/cart/".concat(t),{method:"DELETE"});if(!e.ok){let t=await e.json();throw Error(t.error||"Failed to remove item from cart")}n(e=>e.filter(e=>e.id!==t));let r=await fetch("/api/cart"),a=await r.json();l(a.subtotal||0),(0,i.oR)({title:"Item removed",description:"Item has been removed from your cart."})}catch(t){console.error("Failed to remove item:",t),(0,i.oR)({title:"Error",description:t instanceof Error?t.message:"Failed to remove item from cart",variant:"destructive"})}finally{u(!1)}},h=async()=>{try{u(!0),await Promise.all(r.map(t=>p(t.id))),n([]),l(0),(0,i.oR)({title:"Cart cleared",description:"All items have been removed from your cart."})}catch(t){console.error("Failed to clear cart:",t),(0,i.oR)({title:"Error",description:"Failed to clear cart",variant:"destructive"})}finally{u(!1)}};return(0,a.jsx)(s.Provider,{value:{cart:r,addToCart:f,removeItem:p,updateQuantity:m,clearCart:h,cartTotal:c,isLoading:d},children:e})}}}]);