"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1178],{1178:(e,i,r)=>{r.r(i),r.d(i,{getCategories:()=>c,getFeaturedProducts:()=>o,getProductById:()=>l,getProducts:()=>a,getRelatedProducts:()=>d});var n=r(1094);let t=r.g.prisma||new n.PrismaClient({log:["error"]});async function a(){let e=await t.product.findMany({include:{category:!0,images:{where:{isMain:!0},take:1},reviews:{select:{rating:!0}}},where:{inStock:!0}});return e?e.map(e=>{var i,r;return{id:e.id,name:e.name,description:e.description,price:e.price,originalPrice:e.originalPrice||void 0,image:(null===(i=e.images[0])||void 0===i?void 0:i.url)||void 0,category:(null===(r=e.category)||void 0===r?void 0:r.slug)||"",featured:e.featured,rating:e.reviews.length?e.reviews.reduce((e,i)=>e+i.rating,0)/e.reviews.length:0,reviews:e.reviews.length,inStock:e.inStock}}):[]}async function o(){let e=await t.product.findMany({include:{category:!0,images:{where:{isMain:!0},take:1},reviews:{select:{rating:!0}}},where:{featured:!0,inStock:!0}});return Array.isArray(e)?e.map(e=>{var i,r,n,t,a,o;return{id:e.id,name:e.name,description:e.description,price:e.price,originalPrice:null!==(t=e.originalPrice)&&void 0!==t?t:void 0,image:null!==(a=null===(r=e.images)||void 0===r?void 0:null===(i=r[0])||void 0===i?void 0:i.url)&&void 0!==a?a:void 0,category:null!==(o=null===(n=e.category)||void 0===n?void 0:n.slug)&&void 0!==o?o:"",featured:e.featured,rating:e.reviews.length?e.reviews.reduce((e,i)=>e+i.rating,0)/e.reviews.length:0,reviews:e.reviews.length,inStock:e.inStock}}):[]}async function l(e){var i,r,n,a,o,l;if(!e)return null;let d=await t.product.findUnique({where:{id:e},include:{category:!0,images:{where:{isMain:!0},take:1},reviews:{select:{rating:!0}}}});return d?{id:d.id,name:d.name,description:d.description,price:d.price,originalPrice:null!==(a=d.originalPrice)&&void 0!==a?a:void 0,image:null!==(o=null===(r=d.images)||void 0===r?void 0:null===(i=r[0])||void 0===i?void 0:i.url)&&void 0!==o?o:void 0,category:null!==(l=null===(n=d.category)||void 0===n?void 0:n.slug)&&void 0!==l?l:"",featured:d.featured,rating:d.reviews.length?d.reviews.reduce((e,i)=>e+i.rating,0)/d.reviews.length:0,reviews:d.reviews.length,inStock:d.inStock}:null}async function d(e){if(!e)return[];let i=await t.product.findMany({include:{category:!0,images:{where:{isMain:!0},take:1},reviews:{select:{rating:!0}}},where:{category:{slug:e},inStock:!0},take:4});return Array.isArray(i)?i.map(e=>{var i,r,n,t,a,o;return{id:e.id,name:e.name,description:e.description,price:e.price,originalPrice:null!==(t=e.originalPrice)&&void 0!==t?t:void 0,image:null!==(a=null===(r=e.images)||void 0===r?void 0:null===(i=r[0])||void 0===i?void 0:i.url)&&void 0!==a?a:void 0,category:null!==(o=null===(n=e.category)||void 0===n?void 0:n.slug)&&void 0!==o?o:"",featured:e.featured,rating:e.reviews.length?e.reviews.reduce((e,i)=>e+i.rating,0)/e.reviews.length:0,reviews:e.reviews.length,inStock:e.inStock}}):[]}async function c(){let e=await t.category.findMany({include:{_count:{select:{products:!0}}}});return Array.isArray(e)?e.map(e=>{var i;return{id:e.id,name:e.name,slug:e.slug,image:null!==(i=e.image)&&void 0!==i?i:void 0}}):[]}}}]);