(()=>{var e={};e.id=3571,e.ids=[3571,5387],e.modules={96330:e=>{"use strict";e.exports=require("@prisma/client")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},12412:e=>{"use strict";e.exports=require("assert")},79428:e=>{"use strict";e.exports=require("buffer")},29021:e=>{"use strict";e.exports=require("fs")},33873:e=>{"use strict";e.exports=require("path")},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},74075:e=>{"use strict";e.exports=require("zlib")},63943:e=>{"use strict";e.exports=import("oslo/otp")},4573:e=>{"use strict";e.exports=require("node:buffer")},1728:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>o.a,__next_app__:()=>u,pages:()=>d,routeModule:()=>p,tree:()=>l});var s=t(70260),i=t(28203),a=t(25155),o=t.n(a),n=t(67292),c={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>n[e]);t.d(r,c);let l=["",{children:["products",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,88274)),"/workspaces/BeautyShop/app/products/page.tsx"]}]},{loading:[()=>Promise.resolve().then(t.bind(t,48452)),"/workspaces/BeautyShop/app/products/loading.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,10375)),"/workspaces/BeautyShop/app/layout.tsx"],loading:[()=>Promise.resolve().then(t.bind(t,84717)),"/workspaces/BeautyShop/app/loading.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,19937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,69116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,41485,23)),"next/dist/client/components/unauthorized-error"]}],d=["/workspaces/BeautyShop/app/products/page.tsx"],u={require:t,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:i.RouteKind.APP_PAGE,page:"/products/page",pathname:"/products",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},85058:(e,r,t)=>{Promise.resolve().then(t.bind(t,25830)),Promise.resolve().then(t.bind(t,32830)),Promise.resolve().then(t.bind(t,96478))},3210:(e,r,t)=>{Promise.resolve().then(t.bind(t,86765)),Promise.resolve().then(t.bind(t,90898)),Promise.resolve().then(t.bind(t,3178))},86765:(e,r,t)=>{"use strict";t.d(r,{default:()=>x});var s=t(45512),i=t(28531),a=t.n(i),o=t(10453),n=t(30510),c=t(10617),l=t(87021);t(58009);var d=t(21643),u=t(59462);let p=(0,d.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function m({className:e,variant:r,...t}){return(0,s.jsx)("div",{className:(0,u.cn)(p({variant:r}),e),...t})}var g=t(99422),h=t(24532);function x({product:e}){let{addToCart:r}=(0,g._)();return(0,s.jsxs)("div",{className:"group relative",children:[(0,s.jsxs)("div",{className:"aspect-square bg-muted rounded-lg overflow-hidden",children:[(0,s.jsx)(a(),{href:`/products/${e.id}`,children:(0,s.jsx)("img",{src:e.image||({skincare:"https://images.unsplash.com/photo-1570172619644-dfd03ed5d881?q=80&w=500&auto=format&fit=crop",makeup:"https://images.unsplash.com/photo-1596462502278-27bfdc403348?q=80&w=500&auto=format&fit=crop",haircare:"https://images.unsplash.com/photo-1535585209827-a15fcdbc4c2d?q=80&w=500&auto=format&fit=crop",fragrance:"https://images.unsplash.com/photo-1594035910387-fea47794261f?q=80&w=500&auto=format&fit=crop","bath-body":"https://images.unsplash.com/photo-1608248597279-f99d160bfcbc?q=80&w=500&auto=format&fit=crop",tools:"https://images.unsplash.com/photo-1522338242992-e1a54906a8da?q=80&w=500&auto=format&fit=crop"})[e.category]||"https://images.unsplash.com/photo-1571781926291-c477ebfd024b?q=80&w=500&auto=format&fit=crop",alt:e.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"})}),(0,s.jsx)("div",{className:"absolute top-2 right-2 flex flex-col gap-2",children:(0,s.jsx)(l.$,{variant:"secondary",size:"icon",className:"h-8 w-8 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:(0,s.jsx)(o.A,{className:"h-4 w-4"})})}),e.originalPrice&&(0,s.jsxs)(m,{className:"absolute top-2 left-2 bg-pink-600",children:[Math.round((1-e.price/e.originalPrice)*100),"% OFF"]}),(0,s.jsx)("div",{className:"absolute bottom-0 left-0 right-0 p-4 bg-gradient-to-t from-black/70 to-transparent opacity-0 group-hover:opacity-100 transition-opacity",children:(0,s.jsxs)(l.$,{className:"w-full bg-white text-black hover:bg-gray-100",onClick:()=>r(e),children:[(0,s.jsx)(n.A,{className:"mr-2 h-4 w-4"})," Add to Cart"]})})]}),(0,s.jsxs)("div",{className:"mt-4",children:[(0,s.jsxs)("div",{className:"flex items-center mb-1",children:[(0,s.jsx)("div",{className:"flex",children:[,,,,,].fill(0).map((r,t)=>(0,s.jsx)(c.A,{className:`h-4 w-4 ${t<e.rating?"fill-yellow-400 text-yellow-400":"text-muted"}`},t))}),(0,s.jsxs)("span",{className:"ml-1 text-xs text-muted-foreground",children:["(",e.reviews,")"]})]}),(0,s.jsx)(a(),{href:`/products/${e.id}`,children:(0,s.jsx)("h3",{className:"font-medium text-sm md:text-base hover:text-pink-600 transition-colors",children:e.name})}),(0,s.jsxs)("div",{className:"mt-1 flex items-center",children:[(0,s.jsx)("span",{className:"font-medium text-pink-600",children:(0,h.v)(e.price)}),e.originalPrice&&(0,s.jsx)("span",{className:"ml-2 text-sm text-muted-foreground line-through",children:(0,h.v)(e.originalPrice)})]})]})]})}},90898:(e,r,t)=>{"use strict";t.d(r,{Checkbox:()=>c});var s=t(45512),i=t(58009),a=t(2112),o=t(24849),n=t(59462);let c=i.forwardRef(({className:e,...r},t)=>(0,s.jsx)(a.bL,{ref:t,className:(0,n.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...r,children:(0,s.jsx)(a.C1,{className:(0,n.cn)("flex items-center justify-center text-current"),children:(0,s.jsx)(o.A,{className:"h-4 w-4"})})}));c.displayName=a.bL.displayName},3178:(e,r,t)=>{"use strict";t.d(r,{Slider:()=>n});var s=t(45512),i=t(58009),a=t(84732),o=t(59462);let n=i.forwardRef(({className:e,...r},t)=>(0,s.jsxs)(a.bL,{ref:t,className:(0,o.cn)("relative flex w-full touch-none select-none items-center",e),...r,children:[(0,s.jsx)(a.CC,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:(0,s.jsx)(a.Q6,{className:"absolute h-full bg-primary"})}),(0,s.jsx)(a.zi,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));n.displayName=a.bL.displayName},24532:(e,r,t)=>{"use strict";function s(e){return new Intl.NumberFormat("en-KE",{style:"currency",currency:"KES",minimumFractionDigits:0,maximumFractionDigits:0}).format(e)}t.d(r,{v:()=>s})},48452:(e,r,t)=>{"use strict";function s(){return null}t.r(r),t.d(r,{default:()=>s})},88274:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>m,revalidate:()=>g});var s=t(62740),i=t(85387),a=t(25830),o=t(38537),n=t(32830),c=t(96478),l=t(73205);let d=(0,t(83238).A)("SlidersHorizontal",[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]]);var u=t(97717),p=t(49109);async function m(){let e=[],r=[];try{e=await (0,i.getProducts)(),Array.isArray(e)||(console.error("getProducts() did not return an array:",e),e=[])}catch(r){console.error("Error fetching products:",r),e=[]}try{r=await (0,i.getCategories)(),Array.isArray(r)||(console.error("getCategories() did not return an array:",r),r=[])}catch(e){console.error("Error fetching categories:",e),r=[]}return(0,s.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold mb-8",children:"All Products"}),(0,s.jsxs)("div",{className:"flex flex-col md:flex-row gap-8",children:[(0,s.jsxs)("div",{className:"hidden md:block w-64 space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-medium text-lg mb-3",children:"Categories"}),(0,s.jsx)("div",{className:"space-y-2",children:r.length>0?r.map(e=>(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(n.Checkbox,{id:`category-${e.id}`}),(0,s.jsx)("label",{htmlFor:`category-${e.id}`,className:"text-sm",children:e.name})]},e.id)):(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"No categories available"})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-medium text-lg mb-3",children:"Price Range"}),(0,s.jsx)(c.Slider,{defaultValue:[0,100],max:100,step:1,className:"mb-6"}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("div",{className:"w-20",children:(0,s.jsx)(l.p,{type:"number",placeholder:"Min"})}),(0,s.jsx)("span",{children:"-"}),(0,s.jsx)("div",{className:"w-20",children:(0,s.jsx)(l.p,{type:"number",placeholder:"Max"})})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-medium text-lg mb-3",children:"Rating"}),(0,s.jsx)("div",{className:"space-y-2",children:[5,4,3,2,1].map(e=>(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(n.Checkbox,{id:`rating-${e}`}),(0,s.jsxs)("label",{htmlFor:`rating-${e}`,className:"text-sm flex items-center",children:[Array(e).fill(0).map((e,r)=>(0,s.jsx)(p.A,{className:"h-4 w-4 fill-yellow-400 text-yellow-400"},r)),Array(5-e).fill(0).map((e,r)=>(0,s.jsx)(p.A,{className:"h-4 w-4 text-gray-300"},r)),(0,s.jsx)("span",{className:"ml-1",children:"& Up"})]})]},e))})]}),(0,s.jsx)(o.$,{className:"w-full",children:"Apply Filters"})]}),(0,s.jsx)("div",{className:"md:hidden mb-4",children:(0,s.jsxs)(o.$,{variant:"outline",className:"w-full flex items-center justify-center",children:[(0,s.jsx)(d,{className:"mr-2 h-4 w-4"})," Filters"]})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"relative mb-6",children:[(0,s.jsx)(u.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,s.jsx)(l.p,{placeholder:"Search products...",className:"pl-10"})]}),e.length>0?(0,s.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(e=>(0,s.jsx)(a.default,{product:e},e.id))}):(0,s.jsx)("p",{className:"text-center text-gray-500",children:"No products available"}),e.length>0&&(0,s.jsx)("div",{className:"mt-8 flex justify-center",children:(0,s.jsxs)("nav",{className:"flex items-center space-x-2",children:[(0,s.jsx)(o.$,{variant:"outline",size:"sm",disabled:!0,children:"Previous"}),(0,s.jsx)(o.$,{variant:"outline",size:"sm",className:"bg-pink-600 text-white",children:"1"}),(0,s.jsx)(o.$,{variant:"outline",size:"sm",children:"2"}),(0,s.jsx)(o.$,{variant:"outline",size:"sm",children:"3"}),(0,s.jsx)(o.$,{variant:"outline",size:"sm",children:"Next"})]})})]})]})]})}let g=3600},25830:(e,r,t)=>{"use strict";t.d(r,{default:()=>s});let s=(0,t(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/workspaces/BeautyShop/components/product-card.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/workspaces/BeautyShop/components/product-card.tsx","default")},32830:(e,r,t)=>{"use strict";t.d(r,{Checkbox:()=>s});let s=(0,t(46760).registerClientReference)(function(){throw Error("Attempted to call Checkbox() from the server but Checkbox is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/workspaces/BeautyShop/components/ui/checkbox.tsx","Checkbox")},96478:(e,r,t)=>{"use strict";t.d(r,{Slider:()=>s});let s=(0,t(46760).registerClientReference)(function(){throw Error("Attempted to call Slider() from the server but Slider is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/workspaces/BeautyShop/components/ui/slider.tsx","Slider")},11587:(e,r,t)=>{"use strict";var s=t(96330),i=t(12042),a=t(23420);let o=global;if(process.env.VERCEL){let e=new i.bC({connectionString:process.env.DATABASE_URL}),r=new a.J(e);new s.PrismaClient({adapter:r,log:["error"]})}else o.prisma||new s.PrismaClient({log:["error"]})},85387:(e,r,t)=>{"use strict";t.r(r),t.d(r,{getCategories:()=>c,getFeaturedProducts:()=>a,getProductById:()=>o,getProducts:()=>i,getRelatedProducts:()=>n});var s=t(11587);async function i(){try{let e=await s.prisma.product.findMany({include:{category:!0,images:{where:{isMain:!0},take:1},reviews:{select:{rating:!0}}},where:{inStock:!0}});if(!Array.isArray(e))return console.error("getProducts: Expected array, got:",e),[];return e.map(e=>({id:e.id,name:e.name,description:e.description,price:e.price,originalPrice:e.originalPrice??void 0,image:e.images[0]?.url??void 0,category:e.category?.slug??"",featured:e.featured,rating:e.reviews.length?e.reviews.reduce((e,r)=>e+r.rating,0)/e.reviews.length:0,reviews:e.reviews.length,inStock:e.inStock}))}catch(e){return console.error("Error in getProducts:",e),[]}}async function a(){try{let e=await s.prisma.product.findMany({include:{category:!0,images:{where:{isMain:!0},take:1},reviews:{select:{rating:!0}}},where:{featured:!0,inStock:!0}});if(!Array.isArray(e))return console.error("getFeaturedProducts: Expected array, got:",e),[];return e.map(e=>({id:e.id,name:e.name,description:e.description,price:e.price,originalPrice:e.originalPrice??void 0,image:e.images?.[0]?.url??void 0,category:e.category?.slug??"",featured:e.featured,rating:e.reviews.length?e.reviews.reduce((e,r)=>e+r.rating,0)/e.reviews.length:0,reviews:e.reviews.length,inStock:e.inStock}))}catch(e){return console.error("Error in getFeaturedProducts:",e),[]}}async function o(e){if(!e)return console.warn("getProductById: No ID provided"),null;try{let r=await s.prisma.product.findUnique({where:{id:e},include:{category:!0,images:{where:{isMain:!0},take:1},reviews:{select:{rating:!0}}}});if(!r)return console.warn(`getProductById: Product not found for id ${e}`),null;return{id:r.id,name:r.name,description:r.description,price:r.price,originalPrice:r.originalPrice??void 0,image:r.images?.[0]?.url??void 0,category:r.category?.slug??"",featured:r.featured,rating:r.reviews.length?r.reviews.reduce((e,r)=>e+r.rating,0)/r.reviews.length:0,reviews:r.reviews.length,inStock:r.inStock}}catch(r){return console.error(`Error in getProductById for id ${e}:`,r),null}}async function n(e){if(!e)return console.warn("getRelatedProducts: No category provided"),[];try{let r=await s.prisma.product.findMany({include:{category:!0,images:{where:{isMain:!0},take:1},reviews:{select:{rating:!0}}},where:{category:{slug:e},inStock:!0},take:4});if(!Array.isArray(r))return console.error("getRelatedProducts: Expected array, got:",r),[];return r.map(e=>({id:e.id,name:e.name,description:e.description,price:e.price,originalPrice:e.originalPrice??void 0,image:e.images?.[0]?.url??void 0,category:e.category?.slug??"",featured:e.featured,rating:e.reviews.length?e.reviews.reduce((e,r)=>e+r.rating,0)/e.reviews.length:0,reviews:e.reviews.length,inStock:e.inStock}))}catch(r){return console.error(`Error in getRelatedProducts for category ${e}:`,r),[]}}async function c(){try{let e=await s.prisma.category.findMany({include:{_count:{select:{products:!0}}}});if(!Array.isArray(e))return console.error("getCategories: Expected array, got:",e),[];return e.map(e=>({id:e.id,name:e.name,slug:e.slug,image:e.image??void 0,productCount:e._count.products}))}catch(e){return console.error("Error in getCategories:",e),[]}}},97717:(e,r,t)=>{"use strict";t.d(r,{A:()=>s});let s=(0,t(83238).A)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},49109:(e,r,t)=>{"use strict";t.d(r,{A:()=>s});let s=(0,t(83238).A)("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]])}};var r=require("../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[638,4512,3420,7915,6491],()=>t(1728));module.exports=s})();