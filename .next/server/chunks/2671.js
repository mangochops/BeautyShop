"use strict";exports.id=2671,exports.ids=[2671],exports.modules={82671:(e,i,r)=>{r.r(i),r.d(i,{getCategories:()=>o,getFeaturedProducts:()=>c,getProductById:()=>s,getProducts:()=>n,getRelatedProducts:()=>g});var t=r(96330);let a=global.prisma||new t.PrismaClient({log:["error"]});async function n(){let e=await a.product.findMany({include:{category:!0,images:{where:{isMain:!0},take:1},reviews:{select:{rating:!0}}},where:{inStock:!0}});return e?e.map(e=>({id:e.id,name:e.name,description:e.description,price:e.price,originalPrice:e.originalPrice||void 0,image:e.images[0]?.url||void 0,category:e.category?.slug||"",featured:e.featured,rating:e.reviews.length?e.reviews.reduce((e,i)=>e+i.rating,0)/e.reviews.length:0,reviews:e.reviews.length,inStock:e.inStock})):[]}async function c(){let e=await a.product.findMany({include:{category:!0,images:{where:{isMain:!0},take:1},reviews:{select:{rating:!0}}},where:{featured:!0,inStock:!0}});return Array.isArray(e)?e.map(e=>({id:e.id,name:e.name,description:e.description,price:e.price,originalPrice:e.originalPrice??void 0,image:e.images?.[0]?.url??void 0,category:e.category?.slug??"",featured:e.featured,rating:e.reviews.length?e.reviews.reduce((e,i)=>e+i.rating,0)/e.reviews.length:0,reviews:e.reviews.length,inStock:e.inStock})):[]}async function s(e){if(!e)return null;let i=await a.product.findUnique({where:{id:e},include:{category:!0,images:{where:{isMain:!0},take:1},reviews:{select:{rating:!0}}}});return i?{id:i.id,name:i.name,description:i.description,price:i.price,originalPrice:i.originalPrice??void 0,image:i.images?.[0]?.url??void 0,category:i.category?.slug??"",featured:i.featured,rating:i.reviews.length?i.reviews.reduce((e,i)=>e+i.rating,0)/i.reviews.length:0,reviews:i.reviews.length,inStock:i.inStock}:null}async function g(e){if(!e)return[];let i=await a.product.findMany({include:{category:!0,images:{where:{isMain:!0},take:1},reviews:{select:{rating:!0}}},where:{category:{slug:e},inStock:!0},take:4});return Array.isArray(i)?i.map(e=>({id:e.id,name:e.name,description:e.description,price:e.price,originalPrice:e.originalPrice??void 0,image:e.images?.[0]?.url??void 0,category:e.category?.slug??"",featured:e.featured,rating:e.reviews.length?e.reviews.reduce((e,i)=>e+i.rating,0)/e.reviews.length:0,reviews:e.reviews.length,inStock:e.inStock})):[]}async function o(){let e=await a.category.findMany({include:{_count:{select:{products:!0}}}});return Array.isArray(e)?e.map(e=>({id:e.id,name:e.name,slug:e.slug,image:e.image??void 0})):[]}}};