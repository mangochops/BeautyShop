exports.id=6184,exports.ids=[5387,6184],exports.modules={95660:(e,r,t)=>{Promise.resolve().then(t.bind(t,1762)),Promise.resolve().then(t.t.bind(t,59607,23))},1740:(e,r,t)=>{Promise.resolve().then(t.bind(t,27102)),Promise.resolve().then(t.t.bind(t,28531,23))},96487:()=>{},78335:()=>{},27102:(e,r,t)=>{"use strict";t.d(r,{default:()=>g});var a=t(45512),i=t(58009),s=t(79334),n=t(87021),o=t(25409),d=t(47699),c=t(48859),l=t(54069),u=t(16303),m=t(97643),p=t(29637),f=t(70801);function g({product:e,categories:r}){let t=(0,s.useRouter)(),[g,h]=(0,i.useState)(!1),[x,y]=(0,i.useState)(e||{name:"",description:"",price:0,originalPrice:void 0,categoryId:"",featured:!1,inStock:!0,stockQuantity:0,sku:"",images:[]}),[v,b]=(0,i.useState)(e?.images?.map(e=>e.url)||[""]),j=e=>{let{name:r,value:t}=e.target;y(e=>({...e,[r]:t}))},w=e=>{let{name:r,value:t}=e.target;y(e=>({...e,[r]:Number(t)}))},N=(e,r)=>{y(t=>({...t,[e]:r}))},k=(e,r)=>{let t=[...v];t[e]=r,b(t);let a=t.filter((e,r)=>e||r===t.length-1);b(a);let i=a.filter(e=>e).map((e,r)=>({url:e,alt:`${x.name} image ${r+1}`,isMain:0===r}));y(e=>({...e,images:i}))},C=async r=>{r.preventDefault(),h(!0);try{let r=v.filter(e=>e).map((e,r)=>({url:e,alt:`${x.name} image ${r+1}`,isMain:0===r})),a={...x,images:r},i=e?`/api/admin/products/${e.id}`:"/api/admin/products",s=e?"PUT":"POST",n=await fetch(i,{method:s,headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!n.ok){let e=await n.json();throw Error(e.error||"Something went wrong")}(0,f.oR)({title:e?"Product updated":"Product created",description:`${x.name} has been ${e?"updated":"created"} successfully.`}),t.push("/admin/products"),t.refresh()}catch(e){console.error("Error submitting form:",e),(0,f.oR)({title:"Error",description:e instanceof Error?e.message:"Failed to save product",variant:"destructive"})}finally{h(!1)}};return(0,a.jsxs)("form",{onSubmit:C,children:[(0,a.jsxs)(p.Tabs,{defaultValue:"general",children:[(0,a.jsxs)(p.TabsList,{className:"mb-4",children:[(0,a.jsx)(p.TabsTrigger,{value:"general",children:"General"}),(0,a.jsx)(p.TabsTrigger,{value:"images",children:"Images"}),(0,a.jsx)(p.TabsTrigger,{value:"inventory",children:"Inventory"})]}),(0,a.jsx)(p.TabsContent,{value:"general",children:(0,a.jsxs)(m.Zp,{children:[(0,a.jsxs)(m.aR,{children:[(0,a.jsx)(m.ZB,{children:"General Information"}),(0,a.jsx)(m.BT,{children:"Basic product information"})]}),(0,a.jsxs)(m.Wu,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.J,{htmlFor:"name",children:"Product Name"}),(0,a.jsx)(o.p,{id:"name",name:"name",value:x.name,onChange:j,required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.J,{htmlFor:"description",children:"Description"}),(0,a.jsx)(c.T,{id:"description",name:"description",rows:5,value:x.description,onChange:j,required:!0})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.J,{htmlFor:"price",children:"Price (KES)"}),(0,a.jsx)(o.p,{id:"price",name:"price",type:"number",step:"1",min:"0",value:x.price,onChange:w,required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.J,{htmlFor:"originalPrice",children:"Original Price (KES) (Optional)"}),(0,a.jsx)(o.p,{id:"originalPrice",name:"originalPrice",type:"number",step:"1",min:"0",value:x.originalPrice||"",onChange:w})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.J,{htmlFor:"categoryId",children:"Category"}),(0,a.jsxs)(l.Select,{name:"categoryId",value:x.categoryId,onValueChange:e=>y(r=>({...r,categoryId:e})),required:!0,children:[(0,a.jsx)(l.SelectTrigger,{children:(0,a.jsx)(l.SelectValue,{placeholder:"Select a category"})}),(0,a.jsx)(l.SelectContent,{children:r.map(e=>(0,a.jsx)(l.SelectItem,{value:e.id,children:e.name},e.id))})]})]})]})]})}),(0,a.jsx)(p.TabsContent,{value:"images",children:(0,a.jsxs)(m.Zp,{children:[(0,a.jsxs)(m.aR,{children:[(0,a.jsx)(m.ZB,{children:"Product Images"}),(0,a.jsx)(m.BT,{children:"Upload and manage product images"})]}),(0,a.jsx)(m.Wu,{className:"space-y-4",children:(0,a.jsx)("div",{className:"grid gap-4 sm:grid-cols-2 md:grid-cols-3",children:v.map((e,r)=>(0,a.jsx)("div",{className:"relative aspect-square rounded-md border-2 border-dashed border-gray-200 p-4 flex flex-col items-center justify-center",children:e?(0,a.jsxs)("div",{className:"relative w-full h-full",children:[(0,a.jsx)("img",{src:e||"/placeholder.svg",alt:`Product image ${r+1}`,className:"h-full w-full object-contain"}),(0,a.jsx)(n.$,{type:"button",variant:"destructive",size:"sm",className:"absolute top-2 right-2",onClick:()=>k(r,""),children:"Remove"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"text-center",children:(0,a.jsx)("div",{className:"mt-2 text-sm text-gray-500",children:"Enter image URL"})}),(0,a.jsx)(o.p,{className:"mt-2",placeholder:"https://example.com/image.jpg",value:e,onChange:e=>k(r,e.target.value)})]})},r))})})]})}),(0,a.jsx)(p.TabsContent,{value:"inventory",children:(0,a.jsxs)(m.Zp,{children:[(0,a.jsxs)(m.aR,{children:[(0,a.jsx)(m.ZB,{children:"Inventory & Options"}),(0,a.jsx)(m.BT,{children:"Manage inventory and product options"})]}),(0,a.jsxs)(m.Wu,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(u.Checkbox,{id:"inStock",checked:x.inStock,onCheckedChange:e=>N("inStock",e)}),(0,a.jsx)(d.J,{htmlFor:"inStock",children:"In Stock"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(u.Checkbox,{id:"featured",checked:x.featured,onCheckedChange:e=>N("featured",e)}),(0,a.jsx)(d.J,{htmlFor:"featured",children:"Featured Product"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.J,{htmlFor:"stockQuantity",children:"Stock Quantity"}),(0,a.jsx)(o.p,{id:"stockQuantity",name:"stockQuantity",type:"number",min:"0",value:x.stockQuantity,onChange:w})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.J,{htmlFor:"sku",children:"SKU (Stock Keeping Unit)"}),(0,a.jsx)(o.p,{id:"sku",name:"sku",value:x.sku||"",onChange:j})]})]})]})})]}),(0,a.jsxs)("div",{className:"mt-6 flex justify-end gap-4",children:[(0,a.jsx)(n.$,{type:"button",variant:"outline",onClick:()=>t.push("/admin/products"),children:"Cancel"}),(0,a.jsx)(n.$,{type:"submit",disabled:g,children:g?"Saving...":e?"Update Product":"Create Product"})]})]})}},97643:(e,r,t)=>{"use strict";t.d(r,{BT:()=>c,Wu:()=>l,ZB:()=>d,Zp:()=>n,aR:()=>o,wL:()=>u});var a=t(45512),i=t(58009),s=t(59462);let n=i.forwardRef(({className:e,...r},t)=>(0,a.jsx)("div",{ref:t,className:(0,s.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...r}));n.displayName="Card";let o=i.forwardRef(({className:e,...r},t)=>(0,a.jsx)("div",{ref:t,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",e),...r}));o.displayName="CardHeader";let d=i.forwardRef(({className:e,...r},t)=>(0,a.jsx)("div",{ref:t,className:(0,s.cn)("text-2xl font-semibold leading-none tracking-tight",e),...r}));d.displayName="CardTitle";let c=i.forwardRef(({className:e,...r},t)=>(0,a.jsx)("div",{ref:t,className:(0,s.cn)("text-sm text-muted-foreground",e),...r}));c.displayName="CardDescription";let l=i.forwardRef(({className:e,...r},t)=>(0,a.jsx)("div",{ref:t,className:(0,s.cn)("p-6 pt-0",e),...r}));l.displayName="CardContent";let u=i.forwardRef(({className:e,...r},t)=>(0,a.jsx)("div",{ref:t,className:(0,s.cn)("flex items-center p-6 pt-0",e),...r}));u.displayName="CardFooter"},16303:(e,r,t)=>{"use strict";t.d(r,{Checkbox:()=>P});var a=t(45512),i=t(58009),s=t(29952),n=t(6004),o=t(31412),d=t(13024),c=t(66582),l=t(38762),u=t(98060),m=t(30830),p="Checkbox",[f,g]=(0,n.A)(p),[h,x]=f(p),y=i.forwardRef((e,r)=>{let{__scopeCheckbox:t,name:n,checked:c,defaultChecked:l,required:u,disabled:p,value:f="on",onCheckedChange:g,form:x,...y}=e,[v,b]=i.useState(null),k=(0,s.s)(r,e=>b(e)),C=i.useRef(!1),P=!v||x||!!v.closest("form"),[R=!1,S]=(0,d.i)({prop:c,defaultProp:l,onChange:g}),T=i.useRef(R);return i.useEffect(()=>{let e=v?.form;if(e){let r=()=>S(T.current);return e.addEventListener("reset",r),()=>e.removeEventListener("reset",r)}},[v,S]),(0,a.jsxs)(h,{scope:t,state:R,disabled:p,children:[(0,a.jsx)(m.sG.button,{type:"button",role:"checkbox","aria-checked":w(R)?"mixed":R,"aria-required":u,"data-state":N(R),"data-disabled":p?"":void 0,disabled:p,value:f,...y,ref:k,onKeyDown:(0,o.m)(e.onKeyDown,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:(0,o.m)(e.onClick,e=>{S(e=>!!w(e)||!e),P&&(C.current=e.isPropagationStopped(),C.current||e.stopPropagation())})}),P&&(0,a.jsx)(j,{control:v,bubbles:!C.current,name:n,value:f,checked:R,required:u,disabled:p,form:x,style:{transform:"translateX(-100%)"},defaultChecked:!w(l)&&l})]})});y.displayName=p;var v="CheckboxIndicator",b=i.forwardRef((e,r)=>{let{__scopeCheckbox:t,forceMount:i,...s}=e,n=x(v,t);return(0,a.jsx)(u.C,{present:i||w(n.state)||!0===n.state,children:(0,a.jsx)(m.sG.span,{"data-state":N(n.state),"data-disabled":n.disabled?"":void 0,...s,ref:r,style:{pointerEvents:"none",...e.style}})})});b.displayName=v;var j=e=>{let{control:r,checked:t,bubbles:s=!0,defaultChecked:n,...o}=e,d=i.useRef(null),u=(0,c.Z)(t),m=(0,l.X)(r);i.useEffect(()=>{let e=d.current,r=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(u!==t&&r){let a=new Event("click",{bubbles:s});e.indeterminate=w(t),r.call(e,!w(t)&&t),e.dispatchEvent(a)}},[u,t,s]);let p=i.useRef(!w(t)&&t);return(0,a.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n??p.current,...o,tabIndex:-1,ref:d,style:{...e.style,...m,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function w(e){return"indeterminate"===e}function N(e){return w(e)?"indeterminate":e?"checked":"unchecked"}var k=t(24849),C=t(59462);let P=i.forwardRef(({className:e,...r},t)=>(0,a.jsx)(y,{ref:t,className:(0,C.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...r,children:(0,a.jsx)(b,{className:(0,C.cn)("flex items-center justify-center text-current"),children:(0,a.jsx)(k.A,{className:"h-4 w-4"})})}));P.displayName=y.displayName},47699:(e,r,t)=>{"use strict";t.d(r,{J:()=>c});var a=t(45512),i=t(58009),s=t(92405),n=t(21643),o=t(59462);let d=(0,n.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=i.forwardRef(({className:e,...r},t)=>(0,a.jsx)(s.b,{ref:t,className:(0,o.cn)(d(),e),...r}));c.displayName=s.b.displayName},54069:(e,r,t)=>{"use strict";t.d(r,{Select:()=>l,SelectContent:()=>g,SelectItem:()=>h,SelectTrigger:()=>m,SelectValue:()=>u});var a=t(45512),i=t(58009),s=t(15118),n=t(98755),o=t(28638),d=t(24849),c=t(59462);let l=s.bL;s.YJ;let u=s.WT,m=i.forwardRef(({className:e,children:r,...t},i)=>(0,a.jsxs)(s.l9,{ref:i,className:(0,c.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...t,children:[r,(0,a.jsx)(s.In,{asChild:!0,children:(0,a.jsx)(n.A,{className:"h-4 w-4 opacity-50"})})]}));m.displayName=s.l9.displayName;let p=i.forwardRef(({className:e,...r},t)=>(0,a.jsx)(s.PP,{ref:t,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",e),...r,children:(0,a.jsx)(o.A,{className:"h-4 w-4"})}));p.displayName=s.PP.displayName;let f=i.forwardRef(({className:e,...r},t)=>(0,a.jsx)(s.wn,{ref:t,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",e),...r,children:(0,a.jsx)(n.A,{className:"h-4 w-4"})}));f.displayName=s.wn.displayName;let g=i.forwardRef(({className:e,children:r,position:t="popper",...i},n)=>(0,a.jsx)(s.ZL,{children:(0,a.jsxs)(s.UC,{ref:n,className:(0,c.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===t&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:t,...i,children:[(0,a.jsx)(p,{}),(0,a.jsx)(s.LM,{className:(0,c.cn)("p-1","popper"===t&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,a.jsx)(f,{})]})}));g.displayName=s.UC.displayName,i.forwardRef(({className:e,...r},t)=>(0,a.jsx)(s.JU,{ref:t,className:(0,c.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...r})).displayName=s.JU.displayName;let h=i.forwardRef(({className:e,children:r,...t},i)=>(0,a.jsxs)(s.q7,{ref:i,className:(0,c.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...t,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(s.VF,{children:(0,a.jsx)(d.A,{className:"h-4 w-4"})})}),(0,a.jsx)(s.p4,{children:r})]}));h.displayName=s.q7.displayName,i.forwardRef(({className:e,...r},t)=>(0,a.jsx)(s.wv,{ref:t,className:(0,c.cn)("-mx-1 my-1 h-px bg-muted",e),...r})).displayName=s.wv.displayName},29637:(e,r,t)=>{"use strict";t.d(r,{Tabs:()=>T,TabsContent:()=>F,TabsList:()=>E,TabsTrigger:()=>I});var a=t(45512),i=t(58009),s=t(31412),n=t(6004),o=t(48305),d=t(98060),c=t(30830),l=t(59018),u=t(13024),m=t(30096),p="Tabs",[f,g]=(0,n.A)(p,[o.RG]),h=(0,o.RG)(),[x,y]=f(p),v=i.forwardRef((e,r)=>{let{__scopeTabs:t,value:i,onValueChange:s,defaultValue:n,orientation:o="horizontal",dir:d,activationMode:p="automatic",...f}=e,g=(0,l.jH)(d),[h,y]=(0,u.i)({prop:i,onChange:s,defaultProp:n});return(0,a.jsx)(x,{scope:t,baseId:(0,m.B)(),value:h,onValueChange:y,orientation:o,dir:g,activationMode:p,children:(0,a.jsx)(c.sG.div,{dir:g,"data-orientation":o,...f,ref:r})})});v.displayName=p;var b="TabsList",j=i.forwardRef((e,r)=>{let{__scopeTabs:t,loop:i=!0,...s}=e,n=y(b,t),d=h(t);return(0,a.jsx)(o.bL,{asChild:!0,...d,orientation:n.orientation,dir:n.dir,loop:i,children:(0,a.jsx)(c.sG.div,{role:"tablist","aria-orientation":n.orientation,...s,ref:r})})});j.displayName=b;var w="TabsTrigger",N=i.forwardRef((e,r)=>{let{__scopeTabs:t,value:i,disabled:n=!1,...d}=e,l=y(w,t),u=h(t),m=P(l.baseId,i),p=R(l.baseId,i),f=i===l.value;return(0,a.jsx)(o.q7,{asChild:!0,...u,focusable:!n,active:f,children:(0,a.jsx)(c.sG.button,{type:"button",role:"tab","aria-selected":f,"aria-controls":p,"data-state":f?"active":"inactive","data-disabled":n?"":void 0,disabled:n,id:m,...d,ref:r,onMouseDown:(0,s.m)(e.onMouseDown,e=>{n||0!==e.button||!1!==e.ctrlKey?e.preventDefault():l.onValueChange(i)}),onKeyDown:(0,s.m)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&l.onValueChange(i)}),onFocus:(0,s.m)(e.onFocus,()=>{let e="manual"!==l.activationMode;f||n||!e||l.onValueChange(i)})})})});N.displayName=w;var k="TabsContent",C=i.forwardRef((e,r)=>{let{__scopeTabs:t,value:s,forceMount:n,children:o,...l}=e,u=y(k,t),m=P(u.baseId,s),p=R(u.baseId,s),f=s===u.value,g=i.useRef(f);return i.useEffect(()=>{let e=requestAnimationFrame(()=>g.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,a.jsx)(d.C,{present:n||f,children:({present:t})=>(0,a.jsx)(c.sG.div,{"data-state":f?"active":"inactive","data-orientation":u.orientation,role:"tabpanel","aria-labelledby":m,hidden:!t,id:p,tabIndex:0,...l,ref:r,style:{...e.style,animationDuration:g.current?"0s":void 0},children:t&&o})})});function P(e,r){return`${e}-trigger-${r}`}function R(e,r){return`${e}-content-${r}`}C.displayName=k;var S=t(59462);let T=v,E=i.forwardRef(({className:e,...r},t)=>(0,a.jsx)(j,{ref:t,className:(0,S.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...r}));E.displayName=j.displayName;let I=i.forwardRef(({className:e,...r},t)=>(0,a.jsx)(N,{ref:t,className:(0,S.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...r}));I.displayName=N.displayName;let F=i.forwardRef(({className:e,...r},t)=>(0,a.jsx)(C,{ref:t,className:(0,S.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...r}));F.displayName=C.displayName},48859:(e,r,t)=>{"use strict";t.d(r,{T:()=>n});var a=t(45512),i=t(58009),s=t(59462);let n=i.forwardRef(({className:e,...r},t)=>(0,a.jsx)("textarea",{className:(0,s.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:t,...r}));n.displayName="Textarea"},78988:(e,r,t)=>{"use strict";function a(){return null}t.r(r),t.d(r,{default:()=>a})},1762:(e,r,t)=>{"use strict";t.d(r,{default:()=>a});let a=(0,t(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/workspaces/BeautyShop/components/admin/product-form.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/workspaces/BeautyShop/components/admin/product-form.tsx","default")},11587:(e,r,t)=>{"use strict";t.d(r,{z:()=>i});var a=t(96330);let i=global.prisma||new a.PrismaClient({log:["error"]})},85387:(e,r,t)=>{"use strict";t.r(r),t.d(r,{getCategories:()=>d,getFeaturedProducts:()=>s,getProductById:()=>n,getProducts:()=>i,getRelatedProducts:()=>o});var a=t(11587);async function i(){try{let e=await a.z.product.findMany({include:{category:!0,images:{where:{isMain:!0},take:1},reviews:{select:{rating:!0}}},where:{inStock:!0}});if(!Array.isArray(e))return console.error("getProducts: Expected array, got:",e),[];return e.map(e=>({id:e.id,name:e.name,description:e.description,price:e.price,originalPrice:e.originalPrice??void 0,image:e.images[0]?.url??void 0,category:e.category?.slug??"",featured:e.featured,rating:e.reviews.length?e.reviews.reduce((e,r)=>e+r.rating,0)/e.reviews.length:0,reviews:e.reviews.length,inStock:e.inStock}))}catch(e){return console.error("Error in getProducts:",e),[]}}async function s(){try{let e=await a.z.product.findMany({include:{category:!0,images:{where:{isMain:!0},take:1},reviews:{select:{rating:!0}}},where:{featured:!0,inStock:!0}});if(!Array.isArray(e))return console.error("getFeaturedProducts: Expected array, got:",e),[];return e.map(e=>({id:e.id,name:e.name,description:e.description,price:e.price,originalPrice:e.originalPrice??void 0,image:e.images?.[0]?.url??void 0,category:e.category?.slug??"",featured:e.featured,rating:e.reviews.length?e.reviews.reduce((e,r)=>e+r.rating,0)/e.reviews.length:0,reviews:e.reviews.length,inStock:e.inStock}))}catch(e){return console.error("Error in getFeaturedProducts:",e),[]}}async function n(e){if(!e)return console.warn("getProductById: No ID provided"),null;try{let r=await a.z.product.findUnique({where:{id:e},include:{category:!0,images:{where:{isMain:!0},take:1},reviews:{select:{rating:!0}}}});if(!r)return console.warn(`getProductById: Product not found for id ${e}`),null;return{id:r.id,name:r.name,description:r.description,price:r.price,originalPrice:r.originalPrice??void 0,image:r.images?.[0]?.url??void 0,category:r.category?.slug??"",featured:r.featured,rating:r.reviews.length?r.reviews.reduce((e,r)=>e+r.rating,0)/r.reviews.length:0,reviews:r.reviews.length,inStock:r.inStock}}catch(r){return console.error(`Error in getProductById for id ${e}:`,r),null}}async function o(e){if(!e)return console.warn("getRelatedProducts: No category provided"),[];try{let r=await a.z.product.findMany({include:{category:!0,images:{where:{isMain:!0},take:1},reviews:{select:{rating:!0}}},where:{category:{slug:e},inStock:!0},take:4});if(!Array.isArray(r))return console.error("getRelatedProducts: Expected array, got:",r),[];return r.map(e=>({id:e.id,name:e.name,description:e.description,price:e.price,originalPrice:e.originalPrice??void 0,image:e.images?.[0]?.url??void 0,category:e.category?.slug??"",featured:e.featured,rating:e.reviews.length?e.reviews.reduce((e,r)=>e+r.rating,0)/e.reviews.length:0,reviews:e.reviews.length,inStock:e.inStock}))}catch(r){return console.error(`Error in getRelatedProducts for category ${e}:`,r),[]}}async function d(){try{let e=await a.z.category.findMany({include:{_count:{select:{products:!0}}}});if(!Array.isArray(e))return console.error("getCategories: Expected array, got:",e),[];return e.map(e=>({id:e.id,name:e.name,slug:e.slug,image:e.image??void 0,productCount:e._count.products}))}catch(e){return console.error("Error in getCategories:",e),[]}}}};