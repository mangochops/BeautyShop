exports.id=6184,exports.ids=[5387,6184],exports.modules={95660:(e,t,r)=>{Promise.resolve().then(r.bind(r,1762)),Promise.resolve().then(r.t.bind(r,59607,23))},1740:(e,t,r)=>{Promise.resolve().then(r.bind(r,27102)),Promise.resolve().then(r.t.bind(r,28531,23))},96487:()=>{},78335:()=>{},27102:(e,t,r)=>{"use strict";r.d(t,{default:()=>g});var a=r(45512),i=r(58009),s=r(79334),n=r(87021),d=r(25409),o=r(47699),l=r(48859),c=r(54069),u=r(16303),m=r(97643),p=r(29637),f=r(70801);function g({product:e,categories:t}){let r=(0,s.useRouter)(),[g,h]=(0,i.useState)(!1),[x,v]=(0,i.useState)(e||{name:"",description:"",price:0,originalPrice:void 0,categoryId:"",featured:!1,inStock:!0,stockQuantity:0,sku:"",images:[]}),[y,b]=(0,i.useState)(e?.images?.map(e=>e.url)||[""]),j=e=>{let{name:t,value:r}=e.target;v(e=>({...e,[t]:r}))},w=e=>{let{name:t,value:r}=e.target;v(e=>({...e,[t]:Number(r)}))},N=(e,t)=>{v(r=>({...r,[e]:t}))},k=(e,t)=>{let r=[...y];r[e]=t,b(r);let a=r.filter((e,t)=>e||t===r.length-1);b(a);let i=a.filter(e=>e).map((e,t)=>({url:e,alt:`${x.name} image ${t+1}`,isMain:0===t}));v(e=>({...e,images:i}))},C=async t=>{t.preventDefault(),h(!0);try{let t=y.filter(e=>e).map((e,t)=>({url:e,alt:`${x.name} image ${t+1}`,isMain:0===t})),a={...x,images:t},i=e?`/api/admin/products/${e.id}`:"/api/admin/products",s=e?"PUT":"POST",n=await fetch(i,{method:s,headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!n.ok){let e=await n.json();throw Error(e.error||"Something went wrong")}(0,f.oR)({title:e?"Product updated":"Product created",description:`${x.name} has been ${e?"updated":"created"} successfully.`}),r.push("/admin/products"),r.refresh()}catch(e){console.error("Error submitting form:",e),(0,f.oR)({title:"Error",description:e instanceof Error?e.message:"Failed to save product",variant:"destructive"})}finally{h(!1)}};return(0,a.jsxs)("form",{onSubmit:C,children:[(0,a.jsxs)(p.Tabs,{defaultValue:"general",children:[(0,a.jsxs)(p.TabsList,{className:"mb-4",children:[(0,a.jsx)(p.TabsTrigger,{value:"general",children:"General"}),(0,a.jsx)(p.TabsTrigger,{value:"images",children:"Images"}),(0,a.jsx)(p.TabsTrigger,{value:"inventory",children:"Inventory"})]}),(0,a.jsx)(p.TabsContent,{value:"general",children:(0,a.jsxs)(m.Zp,{children:[(0,a.jsxs)(m.aR,{children:[(0,a.jsx)(m.ZB,{children:"General Information"}),(0,a.jsx)(m.BT,{children:"Basic product information"})]}),(0,a.jsxs)(m.Wu,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(o.J,{htmlFor:"name",children:"Product Name"}),(0,a.jsx)(d.p,{id:"name",name:"name",value:x.name,onChange:j,required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(o.J,{htmlFor:"description",children:"Description"}),(0,a.jsx)(l.T,{id:"description",name:"description",rows:5,value:x.description,onChange:j,required:!0})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(o.J,{htmlFor:"price",children:"Price (KES)"}),(0,a.jsx)(d.p,{id:"price",name:"price",type:"number",step:"1",min:"0",value:x.price,onChange:w,required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(o.J,{htmlFor:"originalPrice",children:"Original Price (KES) (Optional)"}),(0,a.jsx)(d.p,{id:"originalPrice",name:"originalPrice",type:"number",step:"1",min:"0",value:x.originalPrice||"",onChange:w})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(o.J,{htmlFor:"categoryId",children:"Category"}),(0,a.jsxs)(c.Select,{name:"categoryId",value:x.categoryId,onValueChange:e=>v(t=>({...t,categoryId:e})),required:!0,children:[(0,a.jsx)(c.SelectTrigger,{children:(0,a.jsx)(c.SelectValue,{placeholder:"Select a category"})}),(0,a.jsx)(c.SelectContent,{children:t.map(e=>(0,a.jsx)(c.SelectItem,{value:e.id,children:e.name},e.id))})]})]})]})]})}),(0,a.jsx)(p.TabsContent,{value:"images",children:(0,a.jsxs)(m.Zp,{children:[(0,a.jsxs)(m.aR,{children:[(0,a.jsx)(m.ZB,{children:"Product Images"}),(0,a.jsx)(m.BT,{children:"Upload and manage product images"})]}),(0,a.jsx)(m.Wu,{className:"space-y-4",children:(0,a.jsx)("div",{className:"grid gap-4 sm:grid-cols-2 md:grid-cols-3",children:y.map((e,t)=>(0,a.jsx)("div",{className:"relative aspect-square rounded-md border-2 border-dashed border-gray-200 p-4 flex flex-col items-center justify-center",children:e?(0,a.jsxs)("div",{className:"relative w-full h-full",children:[(0,a.jsx)("img",{src:e||"/placeholder.svg",alt:`Product image ${t+1}`,className:"h-full w-full object-contain"}),(0,a.jsx)(n.$,{type:"button",variant:"destructive",size:"sm",className:"absolute top-2 right-2",onClick:()=>k(t,""),children:"Remove"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"text-center",children:(0,a.jsx)("div",{className:"mt-2 text-sm text-gray-500",children:"Enter image URL"})}),(0,a.jsx)(d.p,{className:"mt-2",placeholder:"https://example.com/image.jpg",value:e,onChange:e=>k(t,e.target.value)})]})},t))})})]})}),(0,a.jsx)(p.TabsContent,{value:"inventory",children:(0,a.jsxs)(m.Zp,{children:[(0,a.jsxs)(m.aR,{children:[(0,a.jsx)(m.ZB,{children:"Inventory & Options"}),(0,a.jsx)(m.BT,{children:"Manage inventory and product options"})]}),(0,a.jsxs)(m.Wu,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(u.Checkbox,{id:"inStock",checked:x.inStock,onCheckedChange:e=>N("inStock",e)}),(0,a.jsx)(o.J,{htmlFor:"inStock",children:"In Stock"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(u.Checkbox,{id:"featured",checked:x.featured,onCheckedChange:e=>N("featured",e)}),(0,a.jsx)(o.J,{htmlFor:"featured",children:"Featured Product"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(o.J,{htmlFor:"stockQuantity",children:"Stock Quantity"}),(0,a.jsx)(d.p,{id:"stockQuantity",name:"stockQuantity",type:"number",min:"0",value:x.stockQuantity,onChange:w})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(o.J,{htmlFor:"sku",children:"SKU (Stock Keeping Unit)"}),(0,a.jsx)(d.p,{id:"sku",name:"sku",value:x.sku||"",onChange:j})]})]})]})})]}),(0,a.jsxs)("div",{className:"mt-6 flex justify-end gap-4",children:[(0,a.jsx)(n.$,{type:"button",variant:"outline",onClick:()=>r.push("/admin/products"),children:"Cancel"}),(0,a.jsx)(n.$,{type:"submit",disabled:g,children:g?"Saving...":e?"Update Product":"Create Product"})]})]})}},97643:(e,t,r)=>{"use strict";r.d(t,{BT:()=>l,Wu:()=>c,ZB:()=>o,Zp:()=>n,aR:()=>d,wL:()=>u});var a=r(45512),i=r(58009),s=r(59462);let n=i.forwardRef(({className:e,...t},r)=>(0,a.jsx)("div",{ref:r,className:(0,s.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));n.displayName="Card";let d=i.forwardRef(({className:e,...t},r)=>(0,a.jsx)("div",{ref:r,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",e),...t}));d.displayName="CardHeader";let o=i.forwardRef(({className:e,...t},r)=>(0,a.jsx)("div",{ref:r,className:(0,s.cn)("text-2xl font-semibold leading-none tracking-tight",e),...t}));o.displayName="CardTitle";let l=i.forwardRef(({className:e,...t},r)=>(0,a.jsx)("div",{ref:r,className:(0,s.cn)("text-sm text-muted-foreground",e),...t}));l.displayName="CardDescription";let c=i.forwardRef(({className:e,...t},r)=>(0,a.jsx)("div",{ref:r,className:(0,s.cn)("p-6 pt-0",e),...t}));c.displayName="CardContent";let u=i.forwardRef(({className:e,...t},r)=>(0,a.jsx)("div",{ref:r,className:(0,s.cn)("flex items-center p-6 pt-0",e),...t}));u.displayName="CardFooter"},16303:(e,t,r)=>{"use strict";r.d(t,{Checkbox:()=>S});var a=r(45512),i=r(58009),s=r(29952),n=r(6004),d=r(31412),o=r(13024),l=r(66582),c=r(38762),u=r(98060),m=r(30830),p="Checkbox",[f,g]=(0,n.A)(p),[h,x]=f(p),v=i.forwardRef((e,t)=>{let{__scopeCheckbox:r,name:n,checked:l,defaultChecked:c,required:u,disabled:p,value:f="on",onCheckedChange:g,form:x,...v}=e,[y,b]=i.useState(null),k=(0,s.s)(t,e=>b(e)),C=i.useRef(!1),S=!y||x||!!y.closest("form"),[P=!1,R]=(0,o.i)({prop:l,defaultProp:c,onChange:g}),T=i.useRef(P);return i.useEffect(()=>{let e=y?.form;if(e){let t=()=>R(T.current);return e.addEventListener("reset",t),()=>e.removeEventListener("reset",t)}},[y,R]),(0,a.jsxs)(h,{scope:r,state:P,disabled:p,children:[(0,a.jsx)(m.sG.button,{type:"button",role:"checkbox","aria-checked":w(P)?"mixed":P,"aria-required":u,"data-state":N(P),"data-disabled":p?"":void 0,disabled:p,value:f,...v,ref:k,onKeyDown:(0,d.m)(e.onKeyDown,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:(0,d.m)(e.onClick,e=>{R(e=>!!w(e)||!e),S&&(C.current=e.isPropagationStopped(),C.current||e.stopPropagation())})}),S&&(0,a.jsx)(j,{control:y,bubbles:!C.current,name:n,value:f,checked:P,required:u,disabled:p,form:x,style:{transform:"translateX(-100%)"},defaultChecked:!w(c)&&c})]})});v.displayName=p;var y="CheckboxIndicator",b=i.forwardRef((e,t)=>{let{__scopeCheckbox:r,forceMount:i,...s}=e,n=x(y,r);return(0,a.jsx)(u.C,{present:i||w(n.state)||!0===n.state,children:(0,a.jsx)(m.sG.span,{"data-state":N(n.state),"data-disabled":n.disabled?"":void 0,...s,ref:t,style:{pointerEvents:"none",...e.style}})})});b.displayName=y;var j=e=>{let{control:t,checked:r,bubbles:s=!0,defaultChecked:n,...d}=e,o=i.useRef(null),u=(0,l.Z)(r),m=(0,c.X)(t);i.useEffect(()=>{let e=o.current,t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(u!==r&&t){let a=new Event("click",{bubbles:s});e.indeterminate=w(r),t.call(e,!w(r)&&r),e.dispatchEvent(a)}},[u,r,s]);let p=i.useRef(!w(r)&&r);return(0,a.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n??p.current,...d,tabIndex:-1,ref:o,style:{...e.style,...m,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function w(e){return"indeterminate"===e}function N(e){return w(e)?"indeterminate":e?"checked":"unchecked"}var k=r(24849),C=r(59462);let S=i.forwardRef(({className:e,...t},r)=>(0,a.jsx)(v,{ref:r,className:(0,C.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:(0,a.jsx)(b,{className:(0,C.cn)("flex items-center justify-center text-current"),children:(0,a.jsx)(k.A,{className:"h-4 w-4"})})}));S.displayName=v.displayName},47699:(e,t,r)=>{"use strict";r.d(t,{J:()=>l});var a=r(45512),i=r(58009),s=r(92405),n=r(21643),d=r(59462);let o=(0,n.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),l=i.forwardRef(({className:e,...t},r)=>(0,a.jsx)(s.b,{ref:r,className:(0,d.cn)(o(),e),...t}));l.displayName=s.b.displayName},54069:(e,t,r)=>{"use strict";r.d(t,{Select:()=>c,SelectContent:()=>g,SelectItem:()=>h,SelectTrigger:()=>m,SelectValue:()=>u});var a=r(45512),i=r(58009),s=r(15118),n=r(98755),d=r(28638),o=r(24849),l=r(59462);let c=s.bL;s.YJ;let u=s.WT,m=i.forwardRef(({className:e,children:t,...r},i)=>(0,a.jsxs)(s.l9,{ref:i,className:(0,l.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...r,children:[t,(0,a.jsx)(s.In,{asChild:!0,children:(0,a.jsx)(n.A,{className:"h-4 w-4 opacity-50"})})]}));m.displayName=s.l9.displayName;let p=i.forwardRef(({className:e,...t},r)=>(0,a.jsx)(s.PP,{ref:r,className:(0,l.cn)("flex cursor-default items-center justify-center py-1",e),...t,children:(0,a.jsx)(d.A,{className:"h-4 w-4"})}));p.displayName=s.PP.displayName;let f=i.forwardRef(({className:e,...t},r)=>(0,a.jsx)(s.wn,{ref:r,className:(0,l.cn)("flex cursor-default items-center justify-center py-1",e),...t,children:(0,a.jsx)(n.A,{className:"h-4 w-4"})}));f.displayName=s.wn.displayName;let g=i.forwardRef(({className:e,children:t,position:r="popper",...i},n)=>(0,a.jsx)(s.ZL,{children:(0,a.jsxs)(s.UC,{ref:n,className:(0,l.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===r&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...i,children:[(0,a.jsx)(p,{}),(0,a.jsx)(s.LM,{className:(0,l.cn)("p-1","popper"===r&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),(0,a.jsx)(f,{})]})}));g.displayName=s.UC.displayName,i.forwardRef(({className:e,...t},r)=>(0,a.jsx)(s.JU,{ref:r,className:(0,l.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t})).displayName=s.JU.displayName;let h=i.forwardRef(({className:e,children:t,...r},i)=>(0,a.jsxs)(s.q7,{ref:i,className:(0,l.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(s.VF,{children:(0,a.jsx)(o.A,{className:"h-4 w-4"})})}),(0,a.jsx)(s.p4,{children:t})]}));h.displayName=s.q7.displayName,i.forwardRef(({className:e,...t},r)=>(0,a.jsx)(s.wv,{ref:r,className:(0,l.cn)("-mx-1 my-1 h-px bg-muted",e),...t})).displayName=s.wv.displayName},29637:(e,t,r)=>{"use strict";r.d(t,{Tabs:()=>T,TabsContent:()=>F,TabsList:()=>I,TabsTrigger:()=>E});var a=r(45512),i=r(58009),s=r(31412),n=r(6004),d=r(48305),o=r(98060),l=r(30830),c=r(59018),u=r(13024),m=r(30096),p="Tabs",[f,g]=(0,n.A)(p,[d.RG]),h=(0,d.RG)(),[x,v]=f(p),y=i.forwardRef((e,t)=>{let{__scopeTabs:r,value:i,onValueChange:s,defaultValue:n,orientation:d="horizontal",dir:o,activationMode:p="automatic",...f}=e,g=(0,c.jH)(o),[h,v]=(0,u.i)({prop:i,onChange:s,defaultProp:n});return(0,a.jsx)(x,{scope:r,baseId:(0,m.B)(),value:h,onValueChange:v,orientation:d,dir:g,activationMode:p,children:(0,a.jsx)(l.sG.div,{dir:g,"data-orientation":d,...f,ref:t})})});y.displayName=p;var b="TabsList",j=i.forwardRef((e,t)=>{let{__scopeTabs:r,loop:i=!0,...s}=e,n=v(b,r),o=h(r);return(0,a.jsx)(d.bL,{asChild:!0,...o,orientation:n.orientation,dir:n.dir,loop:i,children:(0,a.jsx)(l.sG.div,{role:"tablist","aria-orientation":n.orientation,...s,ref:t})})});j.displayName=b;var w="TabsTrigger",N=i.forwardRef((e,t)=>{let{__scopeTabs:r,value:i,disabled:n=!1,...o}=e,c=v(w,r),u=h(r),m=S(c.baseId,i),p=P(c.baseId,i),f=i===c.value;return(0,a.jsx)(d.q7,{asChild:!0,...u,focusable:!n,active:f,children:(0,a.jsx)(l.sG.button,{type:"button",role:"tab","aria-selected":f,"aria-controls":p,"data-state":f?"active":"inactive","data-disabled":n?"":void 0,disabled:n,id:m,...o,ref:t,onMouseDown:(0,s.m)(e.onMouseDown,e=>{n||0!==e.button||!1!==e.ctrlKey?e.preventDefault():c.onValueChange(i)}),onKeyDown:(0,s.m)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&c.onValueChange(i)}),onFocus:(0,s.m)(e.onFocus,()=>{let e="manual"!==c.activationMode;f||n||!e||c.onValueChange(i)})})})});N.displayName=w;var k="TabsContent",C=i.forwardRef((e,t)=>{let{__scopeTabs:r,value:s,forceMount:n,children:d,...c}=e,u=v(k,r),m=S(u.baseId,s),p=P(u.baseId,s),f=s===u.value,g=i.useRef(f);return i.useEffect(()=>{let e=requestAnimationFrame(()=>g.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,a.jsx)(o.C,{present:n||f,children:({present:r})=>(0,a.jsx)(l.sG.div,{"data-state":f?"active":"inactive","data-orientation":u.orientation,role:"tabpanel","aria-labelledby":m,hidden:!r,id:p,tabIndex:0,...c,ref:t,style:{...e.style,animationDuration:g.current?"0s":void 0},children:r&&d})})});function S(e,t){return`${e}-trigger-${t}`}function P(e,t){return`${e}-content-${t}`}C.displayName=k;var R=r(59462);let T=y,I=i.forwardRef(({className:e,...t},r)=>(0,a.jsx)(j,{ref:r,className:(0,R.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));I.displayName=j.displayName;let E=i.forwardRef(({className:e,...t},r)=>(0,a.jsx)(N,{ref:r,className:(0,R.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));E.displayName=N.displayName;let F=i.forwardRef(({className:e,...t},r)=>(0,a.jsx)(C,{ref:r,className:(0,R.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));F.displayName=C.displayName},48859:(e,t,r)=>{"use strict";r.d(t,{T:()=>n});var a=r(45512),i=r(58009),s=r(59462);let n=i.forwardRef(({className:e,...t},r)=>(0,a.jsx)("textarea",{className:(0,s.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...t}));n.displayName="Textarea"},78988:(e,t,r)=>{"use strict";function a(){return null}r.r(t),r.d(t,{default:()=>a})},1762:(e,t,r)=>{"use strict";r.d(t,{default:()=>a});let a=(0,r(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/workspaces/BeautyShop/components/admin/product-form.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/workspaces/BeautyShop/components/admin/product-form.tsx","default")},11587:(e,t,r)=>{"use strict";r.d(t,{z:()=>i});var a=r(96330);let i=global.prisma||new a.PrismaClient({log:["error"]})},85387:(e,t,r)=>{"use strict";r.r(t),r.d(t,{getCategories:()=>o,getFeaturedProducts:()=>s,getProductById:()=>n,getProducts:()=>i,getRelatedProducts:()=>d});var a=r(11587);async function i(){let e=await a.z.product.findMany({include:{category:!0,images:{where:{isMain:!0},take:1},reviews:{select:{rating:!0}}},where:{inStock:!0}});return e?e.map(e=>({id:e.id,name:e.name,description:e.description,price:e.price,originalPrice:e.originalPrice||void 0,image:e.images[0]?.url||void 0,category:e.category?.slug||"",featured:e.featured,rating:e.reviews.length?e.reviews.reduce((e,t)=>e+t.rating,0)/e.reviews.length:0,reviews:e.reviews.length,inStock:e.inStock})):[]}async function s(){let e=await a.z.product.findMany({include:{category:!0,images:{where:{isMain:!0},take:1},reviews:{select:{rating:!0}}},where:{featured:!0,inStock:!0}});return Array.isArray(e)?e.map(e=>({id:e.id,name:e.name,description:e.description,price:e.price,originalPrice:e.originalPrice??void 0,image:e.images?.[0]?.url??void 0,category:e.category?.slug??"",featured:e.featured,rating:e.reviews.length?e.reviews.reduce((e,t)=>e+t.rating,0)/e.reviews.length:0,reviews:e.reviews.length,inStock:e.inStock})):[]}async function n(e){if(!e)return null;let t=await a.z.product.findUnique({where:{id:e},include:{category:!0,images:{where:{isMain:!0},take:1},reviews:{select:{rating:!0}}}});return t?{id:t.id,name:t.name,description:t.description,price:t.price,originalPrice:t.originalPrice??void 0,image:t.images?.[0]?.url??void 0,category:t.category?.slug??"",featured:t.featured,rating:t.reviews.length?t.reviews.reduce((e,t)=>e+t.rating,0)/t.reviews.length:0,reviews:t.reviews.length,inStock:t.inStock}:null}async function d(e){if(!e)return[];let t=await a.z.product.findMany({include:{category:!0,images:{where:{isMain:!0},take:1},reviews:{select:{rating:!0}}},where:{category:{slug:e},inStock:!0},take:4});return Array.isArray(t)?t.map(e=>({id:e.id,name:e.name,description:e.description,price:e.price,originalPrice:e.originalPrice??void 0,image:e.images?.[0]?.url??void 0,category:e.category?.slug??"",featured:e.featured,rating:e.reviews.length?e.reviews.reduce((e,t)=>e+t.rating,0)/e.reviews.length:0,reviews:e.reviews.length,inStock:e.inStock})):[]}async function o(){let e=await a.z.category.findMany({include:{_count:{select:{products:!0}}}});return Array.isArray(e)?e.map(e=>({id:e.id,name:e.name,slug:e.slug,image:e.image??void 0})):[]}}};